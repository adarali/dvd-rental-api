(this["webpackJsonpdvd-rental-react"]=this["webpackJsonpdvd-rental-react"]||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},70:function(e,t,a){},77:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),c=a.n(s),i=a(17),r=a.n(i),l=(a(50),a(3)),o=a(20),j=a(6),u=a(7),b=a(12),d=a(11),m=(a(51),a(8)),h=(a(52),a(22)),v=a.n(h),O=function(){function e(t){var a=this;Object(j.a)(this,e),this.fetchMovies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.ax.get("/movies",{params:e})},this.fetchMovieDetail=function(e){return a.ax.get("/movies/".concat(e))},this.rentMovie=function(e,t){return a.ax.post("/movies/".concat(e,"/rents"),t)},this.purchaseMovie=function(e,t){return a.ax.post("/movies/".concat(e,"/purchases"),t)},this.create=function(e){return a.ax.post("/movies",e)},this.update=function(e){return a.ax.put("/movies/".concat(e.id),e)},this.ax=v.a.create({timeout:2e3,baseURL:"/api/v1",headers:{Authorization:"Bearer "+t}})}return Object(u.a)(e,[{key:"toggleAvailable",value:function(e){return console.log("available",e),this.ax.patch("/movies/".concat(e,"/available"))}},{key:"saveMovie",value:function(e){return e.id?this.update(e):this.create(e)}}]),e}(),x=function(){function e(t){var a=t.jwt,n=void 0===a?"":a,s=t.user;Object(j.a)(this,e),this.jwt=n,this.user=s,this.service=new O(n)}return Object(u.a)(e,[{key:"logout",value:function(){this.jwt="",this.user={},localStorage.removeItem("auth")}},{key:"isLoggedIn",get:function(){return!(!this.user||!this.user.username)}},{key:"isAdmin",get:function(){return this.isLoggedIn&&this.user.admin}}]),e}(),p=Object(s.createContext)(),g=function(e){return Object(n.jsx)(p.Provider,{value:e.value,children:e.children})},f=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=function(e){var t=e.movie;return e.isAdmin?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("br",{}),Object(n.jsx)("span",{className:t.available?"movie-available":"movie-unavailable",children:t.available?"Available":"Unavailable"})]}):Object(n.jsx)(n.Fragment,{})};return Object(n.jsxs)("div",{className:"movie-item card",onClick:function(){return e.props.onClick(e.movie.id)},children:[Object(n.jsx)("div",{className:"movie-image",children:Object(n.jsx)("img",{src:this.movie.thumbnail,alt:"",onError:this.imgOnError})}),Object(n.jsxs)("div",{className:"movie-info",children:[Object(n.jsx)("div",{className:"movie-title",children:this.movie.title}),Object(n.jsxs)("div",{className:"price",children:["Rental price: ",this.formatPrice(this.movie.rentalPrice),Object(n.jsx)("br",{}),"Sale price: ",this.formatPrice(this.movie.salePrice),Object(n.jsx)(t,{movie:this.movie,isAdmin:this.context.isAdmin})]})]})]})}},{key:"formatPrice",value:function(e){return"$".concat(e.toFixed(2))}},{key:"imgOnError",value:function(e){e.target.src="https://www.thermaxglobal.com/wp-content/uploads/2020/05/image-not-found.jpg"}},{key:"movie",get:function(){return this.props.movie}}]),a}(s.Component);f.contextType=p;a(70);var N=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(j.a)(this,a);var s=(n=t.call(this,e)).props.maxPages||10;return n.state={maxPages:y(s)},window.addEventListener("resize",(function(){n._isMounted&&n.setState({maxPages:y(s)})})),n}return Object(u.a)(a,[{key:"render",value:function(){var e=[],t=this.props,a=t.page,s=t.totalPages,c=t.setPage,i=this.state.maxPages,r=a-Math.floor(i/2);s-r<i&&(r=s-i),r<0&&(r=0);for(var l=function(t){e.push(Object(n.jsx)("li",{className:"page-item page-item-number ".concat(a===t?"active":""),children:Object(n.jsx)("button",{className:"page-link",onClick:function(){return c(t)},children:t+1})},t))},o=r;o<s&&e.length<i;o++)l(o);return Object(n.jsx)("div",{className:"d-flex justify-content-center",children:Object(n.jsx)("nav",{"aria-label":"Page navigation example",children:Object(n.jsxs)("ul",{className:"pagination",children:[Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",href:"#",onClick:this.props.first,disabled:0===a,children:"\xab"})}),Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",href:"#",onClick:this.props.prev,disabled:0===a,children:"\u2039"})}),e,Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",onClick:this.props.next,disabled:this.isLastPage,children:"\u203a"})}),Object(n.jsx)("li",{className:"page-item",children:Object(n.jsx)("button",{className:"page-link",onClick:this.props.last,disabled:this.isLastPage,children:"\xbb"})})]})})})}},{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"isLastPage",get:function(){return this.props.page+1>=this.props.totalPages}}]),a}(s.Component);function y(e){var t=function(){var e=Math.max(document.documentElement.clientWidth,window.innerWidth||0);return e<=576?"xs":e<=768?"sm":e<=992?"md":e<=1200?"lg":"xl"}(),a=e;return"xs"===t?a=3:"sm"===t?a=10:("md"===t||"lg"===t)&&(a=15),e<a?e:a}var k=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("select",{value:this.props.value,onChange:this.props.onChange,className:"form-control custom-select",children:this.props.options.map((function(e){return Object(n.jsx)("option",{value:e.value,children:e.label},e.value)}))})})}}]),a}(s.Component),C=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).handleKeyUp=function(e){if("Enter"===e.key){var t=Object(l.a)(Object(l.a)({},n.state.params),{},{title:e.target.value,page:0});n.setState({params:t}),n.loadMovies(t)}},n.handleSortDirClick=function(e){var t=Object(l.a)({},n.state.params);t.sort.startsWith("-")?(t.sort=t.sort.substr(1),t.page=0,n.setState({sortIcon:"fa-sort-amount-up-alt"})):(t.sort="-"+t.sort,n.setState({sortIcon:"fa-sort-amount-down"})),n.setState({params:t}),n.loadMovies(t)},n.setPage=function(e){e>=0&&e<n.totalPages&&n.setState({params:Object(l.a)(Object(l.a)({},n.state.params),{},{page:e})},n.loadMovies)},n.state={movies:[],params:{page:0,per_page:12,title:"",available:1,sort:"title"},totalRecords:0,sortIcon:"fa-sort-amount-up-alt"},n.props.header.setTitle("Movies"),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("div",{className:"movie-list-header",children:[Object(n.jsxs)("div",{className:"row mb-2",children:[Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)(k,{value:this.sortField,options:[{value:"title",label:"Sort by title"},{value:"likes",label:"Sort by likes"}],onChange:function(){}}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-primary",onClick:this.handleSortDirClick,"aria-label":"Asc/Desc",children:Object(n.jsx)("i",{className:"fa "+this.state.sortIcon})})})]})}),Object(n.jsx)("div",{className:"col-md-6",children:Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("input",{type:"text",className:"title-search form-control",placeholder:"Search by title",onKeyUp:this.handleKeyUp}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.loadMovies()},"aria-label":"Search",children:Object(n.jsx)("i",{className:"fa fa-search"})})})]})})]}),this.isAdmin&&Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-12",children:Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)(k,{value:this.state.params.available,options:[{value:"1",label:"Available only"},{value:"0",label:"Unavailable only"},{value:"2",label:"All"}],onChange:function(t){var a=Object(l.a)({},e.state.params);a.available=t.target.value,a.page=0,e.setState({params:a}),e.loadMovies(a)}}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)(S,{})})]})})}),Object(n.jsx)("div",{className:"row justify-content-center",children:Object(n.jsx)("div",{className:"col-12 paginator-col mx-auto",children:Object(n.jsx)(P,{context:this})})})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)(w,{movies:this.state.movies})}),Object(n.jsx)(P,{context:this})]})}},{key:"componentDidMount",value:function(){this.loadMovies()}},{key:"loadMovies",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.params;this.context.service.fetchMovies(t).then((function(t){var a=t.headers["x-total-count"];e.setState({movies:t.data,totalRecords:a}),e.props.header.setTitle("Movies: "+a)}))}},{key:"currTime",get:function(){return(new Date).getTime()}},{key:"isAdmin",get:function(){return this.context.isAdmin}},{key:"sortField",get:function(){var e=this.state.params.sort;return e.startsWith("-")?e.substr(1):e}},{key:"totalPages",get:function(){return Math.ceil(this.state.totalRecords/this.state.params.per_page)}},{key:"currentPage",get:function(){return this.state.params.page}}]),a}(s.Component);function w(e){var t=Object(m.g)();return e.movies.map((function(e){return Object(n.jsx)("div",{className:"col-xl-4 col-md-6 col-12",children:Object(n.jsx)(f,{movie:e,onClick:function(e){t.push("".concat("/react","/movies/").concat(e))}},e.id)},e.id)}))}function P(e){var t=e.context;return Object(n.jsx)(N,{page:t.state.params.page,setPage:function(e){return t.setPage(e)},totalPages:t.totalPages,first:function(){return t.setPage(0)},prev:function(){return t.setPage(t.currentPage-1)},next:function(){return t.setPage(t.currentPage+1)},last:function(){return t.setPage(t.totalPages-1)}})}function S(){var e=Object(m.g)();return Object(n.jsxs)("button",{className:"btn btn-primary",onClick:function(){e.push("/react/movies/add")},children:[Object(n.jsx)("i",{className:"fa fa-plus"}),"Add movie"]})}C.contextType=p;var M=a(28),I=a.n(M),F=a(44),L=(a(77),a(96)),A=a(92),T=a(93),D=a(94),U=a(95),E=a(19),R=function(e){var t=e.buttonLabel,a=e.className,c=e.movie,i=e.handleOk,r=Object(s.useState)(!1),j=Object(o.a)(r,2),u=j[0],b=j[1],d=Object(s.useState)({rentDays:1,quantity:1}),m=Object(o.a)(d,2),h=m[0],v=m[1],O=function(){b(!u)};return Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"nav-link btn btn-link",color:"text-muted",onClick:function(){O()},children:t}),Object(n.jsxs)(L.a,{isOpen:u,toggle:O,className:a,children:[Object(n.jsxs)(A.a,{toggle:O,children:["Rent movie: ",c.title]}),Object(n.jsx)(T.a,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"rent-days",children:"Days"}),Object(n.jsx)("input",{type:"number",id:"rent-days",className:"form-control",min:1,defaultValue:h.rentDays,onChange:function(e){return v(Object(l.a)(Object(l.a)({},h),{},{rentDays:e.target.value}))}})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),Object(n.jsx)("input",{type:"number",id:"quantity",className:"form-control",min:1,defaultValue:h.quantity,onChange:function(e){return v(Object(l.a)(Object(l.a)({},h),{},{quantity:e.target.value}))}})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:["Total: ",h.rentDays*h.quantity*c.rentalPrice]})})]})}),Object(n.jsxs)(D.a,{children:[Object(n.jsx)(U.a,{color:"primary",onClick:function(){i(h).then((function(){O(),E.b.success("Rent successful")})).catch((function(e){E.b.error(e.response.data.message)}))},children:"OK"}),Object(n.jsx)(U.a,{color:"secondary",onClick:O,children:"Cancel"})]})]})]})},q=function(e){var t=e.buttonLabel,a=e.className,c=e.movie,i=e.handleOk,r=Object(s.useState)(!1),j=Object(o.a)(r,2),u=j[0],b=j[1],d=Object(s.useState)({quantity:1}),m=Object(o.a)(d,2),h=m[0],v=m[1],O=function(){b(!u)};return Object(n.jsxs)("div",{children:[Object(n.jsx)("button",{className:"nav-link btn btn-link",color:"text-muted",onClick:function(){O()},children:t}),Object(n.jsxs)(L.a,{isOpen:u,toggle:O,className:a,children:[Object(n.jsxs)(A.a,{toggle:O,children:["Purchase movie: ",c.title]}),Object(n.jsx)(T.a,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),Object(n.jsx)("input",{type:"number",id:"quantity",className:"form-control",min:1,defaultValue:h.quantity,onChange:function(e){return v(Object(l.a)(Object(l.a)({},h),{},{quantity:e.target.value}))}})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:["Total: ",h.quantity*c.salePrice]})})]})}),Object(n.jsxs)(D.a,{children:[Object(n.jsx)(U.a,{color:"primary",onClick:function(){i(h).then((function(){O(),E.b.success("Purchase successful")})).catch((function(e){E.b.error(e.response.data.message)}))},children:"OK"}),Object(n.jsx)(U.a,{color:"secondary",onClick:O,children:"Cancel"})]})]})]})},V=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).doRent=function(e){return n.context.service.rentMovie(n.movieId,e)},n.purchase=function(e){return n.context.service.purchaseMovie(n.movieId,e)},n.toggleAvailable=function(){return n.context.service.toggleAvailable(n.movieId).then((function(e){n.setState({movie:Object(l.a)(Object(l.a)({},n.state.movie),{},{available:e.data.available})}),E.b.success("The movie is now ".concat(e.data.available?"Available":"Unavailable"))})).catch((function(e){return e.response.data.message}))},n.state={movie:{},currTime:(new Date).getTime()},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state.movie,a=function(){var t=Object(m.g)(),a=e.state.movie;return Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:[Object(n.jsx)("button",{className:"navbar-brand btn btn-outline-secondary",onClick:function(){return t.goBack()},children:Object(n.jsx)("i",{className:"fa fa-arrow-left"})}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavDropdown","aria-controls":"navbarNavDropdown","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavDropdown",children:Object(n.jsxs)("ul",{className:"navbar-nav mr-auto",children:[e.context.isLoggedIn&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item navbar-btn",children:Object(n.jsx)(R,{buttonLabel:"Rent",movie:a,handleOk:e.doRent})}),Object(n.jsx)("li",{className:"nav-item navbar-btn",children:Object(n.jsx)(q,{buttonLabel:"Purchase",movie:a,handleOk:e.purchase})})]}),e.isAdmin&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("li",{className:"nave-item navbar-btn",children:Object(n.jsx)("button",{className:"btn ".concat(a.available?"btn-success":"btn-outline-success"),onClick:function(){return e.toggleAvailable()},children:"".concat(a.available?"Available":"Unavailable")})}),Object(n.jsx)("li",{className:"nave-item navbar-btn",children:Object(n.jsx)("button",{className:"nav-link btn btn-link",onClick:function(){return e.props.handleEdit(e.state.movie,t)},children:"Edit"})}),Object(n.jsx)("li",{className:"nave-item navbar-btn",children:Object(n.jsx)("button",{className:"nav-link btn btn-link",children:"Delete"})})]})]})})]})};return Object(n.jsxs)("div",{children:[Object(n.jsx)(a,{context:this}),Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:t.title}),Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"Rental price:"})," ",this.formatPrice(t.rentalPrice),Object(n.jsx)("br",{}),Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"Sale price:"})," ",this.formatPrice(t.salePrice),Object(n.jsx)("p",{children:t.description})]}),Object(n.jsx)("div",{children:t.movieImages&&t.movieImages.map((function(e){return Object(n.jsx)("div",{className:"movie-image",children:Object(n.jsx)("img",{src:e.url,alt:""})},e.url)}))})]})}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.loadMovie()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"loadMovie",value:function(){var e=Object(F.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.context.service.fetchMovieDetail(this.movieId);case 2:t=e.sent,this.setState({movie:t.data}),this.props.header.setTitle(t.data.title||"Undefined");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"formatPrice",value:function(e){return e?"$".concat(e.toFixed(2)):"$0.00"}},{key:"movieId",get:function(){return this.props.match.params.id}},{key:"isAdmin",get:function(){return this.context.isAdmin}}]),a}(s.Component);V.contextType=p;var W=V,B=(a(85),function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(j.a)(this,a),n=t.call(this,e);var s=Object(l.a)({},n.props.movie());return s.movieImages||(s.movieImages=[]),n.state={movie:s,message:{},imageUrl:""},n.props.header.setTitle("".concat(n.state.movie.id?"Edit movie":"Add movie")),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=function(t){var a=Object(m.g)();return Object(n.jsx)("button",{className:"btn btn-primary mr-2",onClick:function(){return e.saveMovie(a)},children:"Save"})},a=function(e){var t=Object(m.g)();return Object(n.jsx)("button",{className:"btn btn-secondary",onClick:function(){return t.goBack()},children:"Cancel"})},s=function(){return Object(n.jsx)("nav",{className:"navbar navbar-expand navbar-light bg-light navbar-buttons",children:Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(t,{})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(a,{})})]})})},c=Object(l.a)({},this.state.movie),i=function(t){var a=t.field;return Object(n.jsx)("div",{className:"invalid-feedback ".concat(e.state.message[a]?"d-block":""),children:e.state.message[a]})};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(s,{self:this}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"title",children:"Title"}),Object(n.jsx)("input",{type:"text",id:"title",defaultValue:c.title,className:"form-control",onChange:function(t){return e.setState({movie:Object(l.a)(Object(l.a)({},c),{},{title:t.target.value})})}}),Object(n.jsx)(i,{field:"title"})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"description",children:"Description"}),Object(n.jsx)("textarea",{id:"description",cols:"30",className:"form-control",defaultValue:c.description,onChange:function(t){return e.setState({movie:Object(l.a)(Object(l.a)({},c),{},{description:t.target.value})})}}),Object(n.jsx)(i,{field:"description"})]})}),Object(n.jsxs)("div",{className:"row",children:[Object(n.jsxs)("div",{className:"col-lg-4",children:[Object(n.jsx)("label",{htmlFor:"stock",children:"Stock"}),Object(n.jsx)("input",{type:"number",name:"stock",id:"stock",className:"form-control",min:0,value:c.stock,onChange:function(t){return e.setState({movie:Object(l.a)(Object(l.a)({},c),{},{stock:t.target.value})})}}),Object(n.jsx)(i,{field:"stock"})]}),Object(n.jsxs)("div",{className:"col-lg-4",children:[Object(n.jsx)("label",{htmlFor:"stock",children:"Rental price"}),Object(n.jsx)("input",{type:"number",name:"rentalPrice",id:"rentalPrice",className:"form-control",min:0,defaultValue:c.rentalPrice,onChange:function(t){return e.setState({movie:Object(l.a)(Object(l.a)({},c),{},{rentalPrice:t.target.value})})}}),Object(n.jsx)(i,{field:"rentalPrice"})]}),Object(n.jsxs)("div",{className:"col-lg-4",children:[Object(n.jsx)("label",{htmlFor:"salePrice",children:"Sale price"}),Object(n.jsx)("input",{type:"number",name:"salePrice",id:"rentalPrice",className:"form-control",min:0,defaultValue:c.salePrice,onChange:function(t){return e.setState({movie:Object(l.a)(Object(l.a)({},c),{},{salePrice:t.target.value})})}}),Object(n.jsx)(i,{field:"salePrice"})]})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"imageUrl",children:"Image URL"}),Object(n.jsxs)("div",{className:"input-group",children:[Object(n.jsx)("input",{type:"text",className:"form-control",onChange:function(t){return e.setState({imageUrl:t.target.value})}}),Object(n.jsx)("div",{className:"input-group-append",children:Object(n.jsx)("button",{className:"btn btn-primary",onClick:function(){return e.addImage()},children:Object(n.jsx)("i",{className:"fa fa-plus"})})})]}),Object(n.jsx)(i,{field:"movieImages"})]})})]}),Object(n.jsx)("div",{className:"images",children:this.state.movie.movieImages.map((function(t){return Object(n.jsxs)("div",{className:"image-div",children:[Object(n.jsx)("img",{src:t.url,className:"movie-image"}),Object(n.jsx)("button",{className:"btn btn-outline-secondary btn-remove-image",onClick:function(){return e.removeImage(t.url)},children:Object(n.jsx)("i",{className:"fa fa-times"})})]})}))})]})}},{key:"addImage",value:function(){var e=this.state.imageUrl;if(e){var t=Object(l.a)({},this.state.movie);t.movieImages.push({url:e}),this.setState({movie:t})}}},{key:"removeImage",value:function(e){var t=Object(l.a)({},this.state.movie);t.movieImages=t.movieImages.filter((function(t){return t.url!==e})),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{movie:t}))}},{key:"saveMovie",value:function(e){var t=this;return this.context.service.saveMovie(this.state.movie).then((function(a){t.state.movie.id?e.goBack():e.push("/react/movies/"+a.data.id)})).catch((function(e){var a={};e.response.data.forEach((function(e){a[e.field]=e.error.message})),t.setState(Object(l.a)(Object(l.a)({},t.state),{},{message:a}))}))}}]),a}(s.Component));B.contextType=p;var _=B,J=(a(86),function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={title:""},e.header.setTitle=function(e){return n.setState({title:e})},n}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("nav",{className:"main-header navbar navbar-expand navbar-white navbar-light",children:[Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("button",{className:"nav-link","data-widget":"pushmenu",style:{background:"transparent",border:"none"},"aria-label":"Toggle Side menu",children:Object(n.jsx)("i",{className:"fas fa-bars"})})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("div",{className:"nav-title",children:this.state.title})})]}),Object(n.jsx)("ul",{className:"navbar-nav ml-auto",children:Object(n.jsx)("li",{className:"nav-item"})})]})}}]),a}(s.Component)),K=(a(87),a(21)),$=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;function t(e){var t=e.auth;e.context;return t&&t.isLoggedIn?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"image",children:Object(n.jsx)("img",{src:t.user.picture,className:"img-circle elevation-2",alt:"UserImage"})}),Object(n.jsx)("div",{className:"info",children:Object(n.jsx)("span",{href:"#",className:"d-block",style:{color:"white"},children:t.user.fullName})})]}):Object(n.jsx)("div",{className:"d-block mx-auto info",style:{color:"white"},children:Object(n.jsx)("span",{children:"Not logged in"})})}var a=function(t){var a=t.auth;return a&&a.jwt?Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("li",{className:"nav-item nav-item-logout",children:Object(n.jsxs)("button",{type:"button",className:"nav-link btn btn-link",onClick:e.props.logout,children:[Object(n.jsx)("i",{className:"nav-icon fas fa-sign-out-alt"}),Object(n.jsx)("p",{children:"Logout"})]})})}):Object(n.jsx)("li",{className:"nav-item nav-item-logout",children:Object(n.jsxs)("button",{type:"button",className:"nav-link btn btn-link",onClick:e.props.handleLoginClicked,children:[Object(n.jsx)("i",{className:"nav-icon fas fa-sign-in-alt"}),Object(n.jsx)("p",{children:"Login"})]})})};return Object(n.jsxs)("aside",{className:"main-sidebar sidebar-dark-primary elevation-4",children:[Object(n.jsxs)("a",{href:"index3.html",className:"brand-link",children:[Object(n.jsx)("img",{src:"/react/dist/img/AdminLTELogo.png",alt:"AdminLTE Logo",className:"brand-image img-circle elevation-3",style:{opacity:".8"}}),Object(n.jsx)("span",{className:"brand-text font-weight-light",children:"DVD Rental"})]}),Object(n.jsx)(p.Consumer,{children:function(s){return Object(n.jsxs)("div",{className:"sidebar",children:[Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("div",{className:"user-panel mt-3 pb-3 mb-3 d-flex",children:Object(n.jsx)(t,{auth:s,context:e})})}),Object(n.jsx)("nav",{className:"mt-2",children:Object(n.jsxs)("ul",{className:"nav nav-pills nav-sidebar flex-column","data-widget":"treeview",role:"menu","data-accordion":"false",children:[Object(n.jsx)(a,{auth:s}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsxs)(K.b,{to:"/movies",className:"nav-link",children:[Object(n.jsx)("i",{className:"nav-icon fas fa-th"}),Object(n.jsx)("p",{children:"Movies"})]})})]})})]})}})]})}}]),a}(s.Component);$.contextType=p;var z=function(e){Object(b.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(j.a)(this,a),(n=t.call(this,e)).state={title:"No title"},n}return Object(u.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"content-wrapper",children:[Object(n.jsx)("section",{className:"content-header"}),Object(n.jsx)("section",{className:"content",children:Object(n.jsx)("div",{className:"container-fluid",children:Object(n.jsx)("div",{className:"row",children:Object(n.jsx)("div",{className:"col-12",children:Object(n.jsx)("div",{className:"card",children:Object(n.jsx)("div",{className:"card-body",children:this.props.content})})})})})})]})}}]),a}(s.Component),Q=(a(88),function(e){var t=v.a.create({timeout:2e3,baseURL:"/login/auth",headers:{}}),a=e.isOpen,c=e.toggle,i=e.loginSuccess,r=Object(s.useState)({username:"",password:""}),j=Object(o.a)(r,2),u=j[0],b=j[1];return Object(n.jsx)("div",{children:Object(n.jsxs)(L.a,{isOpen:a,toggle:c,children:[Object(n.jsx)(A.a,{toggle:c,children:"Login"}),Object(n.jsx)(T.a,{children:Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Username"}),Object(n.jsx)("input",{type:"text",id:"username",className:"form-control",onChange:function(e){return b(Object(l.a)(Object(l.a)({},u),{},{username:e.target.value}))}})]})}),Object(n.jsx)("div",{className:"row",children:Object(n.jsxs)("div",{className:"col-12",children:[Object(n.jsx)("label",{htmlFor:"username",children:"Password"}),Object(n.jsx)("input",{type:"password",id:"username",className:"form-control",onChange:function(e){return b(Object(l.a)(Object(l.a)({},u),{},{password:e.target.value}))}})]})})]})}),Object(n.jsxs)(D.a,{children:[Object(n.jsx)(U.a,{color:"primary",onClick:function(){return t.post("",u).then((function(e){i(e.data)}))},children:"Login"}),Object(n.jsx)(U.a,{color:"secondary",onClick:c,children:"Cancel"})]})]})})});var G=function(){Object(s.useEffect)((function(){var e=localStorage.getItem("auth"),t=JSON.parse(e);e&&(j.jwt&&j.jwt===t.jwt||u(new x(t)))}));var e=Object(s.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],i=Object(s.useState)(new x({})),r=Object(o.a)(i,2),j=r[0],u=r[1],b={setTitle:function(){}},d="/react",h={},v=Object(n.jsxs)(m.d,{children:[Object(n.jsx)(m.b,{path:d+"/",exact:!0,children:Object(n.jsx)(m.a,{to:d+"/movies"})}),Object(n.jsx)(m.b,{path:d+"/movies",exact:!0,children:Object(n.jsx)(C,{header:b})}),Object(n.jsx)(m.b,{path:d+"/movies/add",render:function(e){return Object(n.jsx)(_,Object(l.a)(Object(l.a)({},e),{},{header:b,movie:function(){}}))}}),Object(n.jsx)(m.b,{path:d+"/movies/edit",render:function(e){return Object(n.jsx)(_,Object(l.a)(Object(l.a)({},e),{},{header:b,movie:function(){return h}}))}}),Object(n.jsx)(m.b,{path:d+"/movies/:id",exact:!0,render:function(e){return Object(n.jsx)(W,Object(l.a)(Object(l.a)({},e),{},{header:b,handleEdit:function(e,t){h=Object(l.a)({},e),console.log("handleEdit movie",h),t.push("".concat(d,"/movies/edit"))}}))}})]});return Object(n.jsx)(K.a,{children:Object(n.jsx)(g,{value:j,children:Object(n.jsxs)("div",{className:"App wrapper",children:[Object(n.jsx)(E.a,{autoClose:3e3}),Object(n.jsx)(Q,{isOpen:a,toggle:function(){return c(!a)},loginSuccess:function(e){u(new x(e)),c(!1),console.log("auth loginsuccess",JSON.stringify(e)),localStorage.setItem("auth",JSON.stringify(e))}}),Object(n.jsx)(J,{header:b}),Object(n.jsx)($,{handleLoginClicked:function(){return c(!0)},logout:function(){j.logout(),u(new x({}))}}),Object(n.jsx)(z,{content:v,header:b})]})})})},H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,97)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),c(e),i(e)}))};r.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(G,{})}),document.getElementById("root")),H()}},[[89,1,2]]]);
//# sourceMappingURL=main.0d5f91b5.chunk.js.map